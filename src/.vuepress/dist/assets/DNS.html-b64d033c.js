import{_ as c,X as i,Y as d,$ as n,a2 as s,a0 as a,Z as t,C as o}from"./framework-8bd09bfb.js";const l={},p=n("a",{href:"%E5%A4%B4%E6%AD%8C%E5%AE%9E%E8%B7%B5%E6%95%99%E5%AD%A6%E5%B9%B3%E5%8F%B0-Linux%E7%BD%91%E7%BB%9C%E5%AE%9E%E6%88%98%EF%BC%88%E4%B8%80%EF%BC%89-DNS%E9%85%8D%E7%BD%AE%EF%BC%88Ubuntu%E7%B3%BB%E7%BB%9F%EF%BC%89"},"TOC",-1),r={href:"https://wlei224.gitee.io",target:"_blank",rel:"noopener noreferrer"},u=t('<blockquote><h2 id="写在前面" tabindex="-1"><a class="header-anchor" href="#写在前面" aria-hidden="true">#</a> 写在前面</h2><p>别划走！！！这篇博客就是你要找的头歌教学实践平台上的：第四关：DNS服务器配置的保姆级通关步骤。</p><p><img src="https://img-blog.csdnimg.cn/d5cb120009f04799a922533bde76d046.png#pic_center" alt="头歌实践教学平台-Linux网络实战（一）第四关" loading="lazy"><img src="https://img-blog.csdnimg.cn/5d1ccfb83506428892cd288db82f3035.png#pic_center" alt="成功图" loading="lazy"> 如上图所示，本关题解笔者已经通过，并测验了多次，为避免出错，可以先按照如下步骤，直接复制即可，通关后想了解原理，再回过头来一步一步进行，如果遇到什么问题，欢迎在评论区进行讨论！</p></blockquote><h1 id="通关前的啰嗦-属于知识补充-不想看就跳过" tabindex="-1"><a class="header-anchor" href="#通关前的啰嗦-属于知识补充-不想看就跳过" aria-hidden="true">#</a> 通关前的啰嗦（属于知识补充，不想看就跳过）</h1><h2 id="相关知识背景" tabindex="-1"><a class="header-anchor" href="#相关知识背景" aria-hidden="true">#</a> 相关知识背景</h2><p><strong>域名</strong>：<code>Internet</code>上某一台计算机或计算机组的名称，是<code>IP地址</code>的映射。域名解析实际上就是把域名映射回<code>IP地址</code>。</p><p><strong>域名解析的过程</strong>：当一个浏览者在浏览器地址框中打入某一个域名，或者从其他网站点击了链接来到了这个域名，浏览器向这个用户的上网接入商发出域名请求，接入商的<code>DNS服务器</code>要查询域名数据库，看这个域名的<code>DNS服务器</code>是什么。然后到<code>DNS服务器</code>中抓取<code>DNS记录</code>，也就是获取这个域名指向哪一个<code>IP地址</code>。在获得这个<code>IP信息</code>后，接入商的服务器就去这个<code>IP地址</code>所对应的服务器上抓取网页内容，然后传输给发出请求的浏览器。 Linux中<code>/etc/resolv.conf</code>文件是<code>DNS客户机</code>配置文件，用于设置<code>DNS服务器</code>的<code>IP地址</code>及<code>DNS域名</code>，还包含了主机的域名搜索顺序。</p><p><strong>正解与反解的Zone意义</strong>： <code>DNS系统</code>最主要的功能就是互查主机名与<code>IP</code>，由于计算机在网络上只认识<code>IP地址</code>，所以，一般来说，我们称由主机名查找<code>IP</code>的过程为正解，由<code>IP</code>查询得到主机名为反解。</p><p>Zone(区域)：一个正解或反解的设置就是一个zone，通常一个配置文件就是一个zone。</p><h1 id="通关保姆级步骤" tabindex="-1"><a class="header-anchor" href="#通关保姆级步骤" aria-hidden="true">#</a> 通关保姆级步骤</h1><p>Tips：头歌平台的环境是ubantu版本的Linux系统，在Linux系统下可以通过Ctrl+insert进行复制，Shift+insert进行粘贴。</p><h2 id="安装dns服务器并开启服务" tabindex="-1"><a class="header-anchor" href="#安装dns服务器并开启服务" aria-hidden="true">#</a> 安装DNS服务器并开启服务</h2>',10),m=t('<p>注意：严格按照如下两个步骤进行bind任务环境的安装与初始化。</p><table><thead><tr><th style="text-align:left;">1、更新安装源后、安装DNS服务器（共两个命令）</th><th>apt-get update</th><th>apt-get install bind9</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>2、开启DNS服务</strong></td><td><strong>service bind9 start</strong></td><td></td></tr></tbody></table>',2),v={href:"http://xn--test-ko8fu0mu8hk37a.com",target:"_blank",rel:"noopener noreferrer"},b=t(`<p><strong>避雷器提醒</strong>：准备bind和host环境时，一定要先下载bind，再下载host！否则会影响映射成功，原因待补充... ...</p><p>补充原因：</p><blockquote><p>在配置DNS服务器时，需要先下载BIND软件包，因为BIND是一种开源的DNS服务器软件，它实现了域名解析服务，可以将域名转换为IP地址。如果没有安装BIND软件包，则无法实现DNS服务器的基本功能。</p><p>下载HOST软件包是为了建立本地域名解析服务，可以将本地主机名映射到IP地址。如果先下载HOST软件包而没有安装BIND软件包，则无法将域名解析请求转发到DNS服务器，这会导致域名无法解析成功。因此，在配置DNS服务器时，需要先安装BIND软件包，再安装HOST软件包，以确保域名解析服务能够正常运行。</p></blockquote><h2 id="一、标题配置域名和ip的正解与反解zone" tabindex="-1"><a class="header-anchor" href="#一、标题配置域名和ip的正解与反解zone" aria-hidden="true">#</a> 一、标题配置域名和IP的正解与反解zone：</h2><p>命令：</p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>vi /etc/bind/named.conf.default-zones
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加如下:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>zone <span class="token string">&quot;test.com&quot;</span><span class="token punctuation">{</span>  
    type master<span class="token punctuation">;</span>  
    file <span class="token string">&quot;/etc/bind/db.test.com&quot;</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>		<span class="token comment">//正向解析</span>

zone <span class="token string">&quot;211.40.10.in-addr.arpa&quot;</span><span class="token punctuation">{</span>  
    type master<span class="token punctuation">;</span>
    file <span class="token string">&quot;/etc/bind/db.10&quot;</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  	<span class="token comment">//反向解析</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、新建-etc-bind-db-test-com文件" tabindex="-1"><a class="header-anchor" href="#二、新建-etc-bind-db-test-com文件" aria-hidden="true">#</a> 二、新建/etc/bind/db.test.com文件</h2><p>命令：</p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>vi /etc/bind/db.test.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加如下:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">;</span>  
<span class="token punctuation">;</span> <span class="token constant">BIND</span> data file <span class="token keyword">for</span> local loopback <span class="token keyword">interface</span>  
<span class="token punctuation">;</span>  
$<span class="token constant">TTL</span>    <span class="token number">604800</span>  
@       <span class="token constant">IN</span>      <span class="token constant">SOA</span>     test<span class="token punctuation">.</span>com<span class="token punctuation">.</span> root<span class="token punctuation">.</span>test<span class="token punctuation">.</span>com<span class="token punctuation">.</span> <span class="token punctuation">(</span>  
                                     <span class="token number">2</span>         <span class="token punctuation">;</span> Serial  
   	                            <span class="token number">604800</span>         <span class="token punctuation">;</span> Refresh  
	                             <span class="token number">86400</span>         <span class="token punctuation">;</span> Retry  
	                           <span class="token number">2419200</span>         <span class="token punctuation">;</span> Expire  
	                            <span class="token number">604800</span> <span class="token punctuation">)</span>       <span class="token punctuation">;</span> Negative Cache <span class="token constant">TTL</span>
<span class="token punctuation">;</span>  
@       <span class="token constant">IN</span>      <span class="token constant">NS</span>      test<span class="token punctuation">.</span>com<span class="token punctuation">.</span>  
@       <span class="token constant">IN</span>      <span class="token constant">A</span>       <span class="token number">10.40</span><span class="token number">.211</span><span class="token number">.244</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="三、新建-etc-bind-db-10文件" tabindex="-1"><a class="header-anchor" href="#三、新建-etc-bind-db-10文件" aria-hidden="true">#</a> 三、新建/etc/bind/db.10文件</h2><p>命令：</p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>vi /etc/bind/db.10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加如下:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">;</span>  
<span class="token punctuation">;</span> <span class="token constant">BIND</span> reverse data file <span class="token keyword">for</span> local loopback <span class="token keyword">interface</span>  
<span class="token punctuation">;</span>  
$<span class="token constant">TTL</span>    <span class="token number">604800</span>  
@       <span class="token constant">IN</span>      <span class="token constant">SOA</span>     test<span class="token punctuation">.</span>com<span class="token punctuation">.</span> root<span class="token punctuation">.</span>test<span class="token punctuation">.</span>com<span class="token punctuation">.</span> <span class="token punctuation">(</span>  
                                    <span class="token number">1</span>         <span class="token punctuation">;</span> Serial  
                               <span class="token number">604800</span>         <span class="token punctuation">;</span> Refresh  
                                <span class="token number">86400</span>         <span class="token punctuation">;</span> Retry  
                              <span class="token number">2419200</span>         <span class="token punctuation">;</span> Expire  
                               <span class="token number">604800</span> <span class="token punctuation">)</span>       <span class="token punctuation">;</span> Negative Cache <span class="token constant">TTL</span>  
<span class="token punctuation">;</span>  
@       <span class="token constant">IN</span>      <span class="token constant">NS</span>      test<span class="token punctuation">.</span>com<span class="token punctuation">.</span>  
<span class="token number">244</span>      <span class="token constant">IN</span>      <span class="token constant">PTR</span>     test<span class="token punctuation">.</span>com<span class="token punctuation">.</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、修改dns服务器搜索顺序-将本地作为dns搜索的第一搜索目录" tabindex="-1"><a class="header-anchor" href="#四、修改dns服务器搜索顺序-将本地作为dns搜索的第一搜索目录" aria-hidden="true">#</a> 四、修改DNS服务器搜索顺序，将本地作为DNS搜索的第一搜索目录</h2><p>命令：</p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>vim /etc/resolv.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>打开/etc/resolv.conf文件后添加到第一行：</p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>nameserver 127.0.0.1 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://img-blog.csdnimg.cn/ac450769cec5475fb849462364cf24ec.png#pic_center" alt="使用vi命令打开文件后添加一行：nameserver 127.0.0.1" tabindex="0" loading="lazy"><figcaption>使用vi命令打开文件后添加一行：nameserver 127.0.0.1</figcaption></figure><h2 id="五、不要忘记重新启动bind服务器" tabindex="-1"><a class="header-anchor" href="#五、不要忘记重新启动bind服务器" aria-hidden="true">#</a> 五、不要忘记重新启动bind服务器</h2><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>service bind9 restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="六、最后安装host命令" tabindex="-1"><a class="header-anchor" href="#六、最后安装host命令" aria-hidden="true">#</a> 六、最后安装host命令</h2><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>apt-get install host
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="七、查询域名和ip是否关联" tabindex="-1"><a class="header-anchor" href="#七、查询域名和ip是否关联" aria-hidden="true">#</a> 七、查询域名和IP是否关联</h2><p>第一步：</p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>host test.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>第二步：</p><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>host 10.40.211.244
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>结束！ 直接开始评测！</p><h2 id="头歌课程网址" tabindex="-1"><a class="header-anchor" href="#头歌课程网址" aria-hidden="true">#</a> 头歌课程网址</h2>`,35),h={href:"https://www.educoder.net/shixuns/qpmhnsiy/challenges",target:"_blank",rel:"noopener noreferrer"},g=n("h2",{id:"写在最后",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#写在最后","aria-hidden":"true"},"#"),s(" 写在最后")],-1),k={href:"https://wlei224.gitee.io",target:"_blank",rel:"noopener noreferrer"},f=n("p",null,"送给大家八个字：慢下来，走好每一步！",-1),_={href:"https://wlei224.gitee.io",target:"_blank",rel:"noopener noreferrer"},x=n("img",{src:"https://img-blog.csdnimg.cn/a27ded70f81f415089e0f067476b6d87.png#pic_center",alt:"CS_GUIDER",loading:"lazy"},null,-1);function N(D,S){const e=o("ExternalLinkIcon");return i(),d("div",null,[n("p",null,[s("@"),p,s(" 见者有缘，欢迎大家访问我的博客【CS_GUIDER】："),n("a",r,[s("https://wlei224.gitee.io"),a(e)]),s(" 或 www.csguider.icu（部署在github，可能访问慢）")]),u,n("blockquote",null,[m,n("p",null,[s("具体编程要求如下： "),n("a",v,[s("先有域名test.com"),a(e)]),s("，然后将该域名与IP地址：10.40.211.244相绑定在一起。")])]),b,n("p",null,[s("头歌实践教学平台："),n("a",h,[s("https://www.educoder.net/shixuns/qpmhnsiy/challenges"),a(e)])]),n("blockquote",null,[g,n("p",null,[s("无论你是计算机小白，还是佬儿，或者是考研党，或者是摸鱼翁，能在CSDN相遇即是缘分，欢迎大家访问我的博客："),n("a",k,[s("https://wlei224.gitee.io"),a(e)]),s(" 或者 www.csguider.icu，如果你对写博文很感兴趣，或者说想加入我一起打造这个小网站，你可以在博客的评论区，或者本文的评论区联系我，总之，话不多说，一起努力！")]),f,n("p",null,[s("CS_GUIDER博客域名："),n("a",_,[s("https://wlei224.gitee.io"),a(e)]),s(" 或 www.csguider.icu（部署在github，可能访问慢）"),x])])])}const I=c(l,[["render",N],["__file","DNS.html.vue"]]);export{I as default};
